/*
@Module: Hakikisha NIDA Module
@Author: Ouma Nyang
@License: MIT License: Copyright (c) 2019 - 2024
*/
$((function(){"use strict";$("#nida_number").mask("00000000 00000 00000 00");(new class{constructor(){this.bearerToken="token_here",this.spinner='\n    <div class="spinner-grow text-primary" role="status">\n        <span class="visually-hidden">Loading...</span>\n    </div>',this.submitButton=$('form button[type="submit"]')}HakikishaNIDA(t){this.submitButton.attr("disabled",!0),$.ajax({url:"app/controller/app_controller",method:"POST",headers:{Authorization:`Bearer ${this.bearerToken}`},data:{verify_nida_nin:t},dataType:"JSON",success:t=>{if(this.submitButton.attr("disabled",!1),t.success&&null!==t.data){let s=t.data;$("#nida_response").html(`\n                <div class="card border-success border border-2">\n                <div class="card-body text-start">\n                <h6 class="card-title text-success"> ${t.message}</h6>\n                <p><strong>First Name:</strong> ${s.FIRSTNAME}</p>\n                <p><strong>Middle Name:</strong> ${s.MIDDLENAME}</p>\n                <p><strong>Last Name:</strong> ${s.SURNAME}</p>\n                <p><strong>Nationality:</strong> ${s.NATIONALITY}</p>\n                <p><strong>Sex:</strong> ${s.SEX}</p>\n                <p><strong>Date of Birth:</strong> ${s.DATEOFBIRTH}</p>\n                <p><strong>NIN:</strong> ${s.NIN}</p>\n                </div>  \n                </div>  \n\n            `)}else $("#nida_response").html(`\n                <div class="alert alert-danger">NIDA verification failed: ${t.message}</div>\n            `)},error:(t,s,n)=>{this.submitButton.attr("disabled",!1),$("#nida_response").html(`\n            <div class="alert alert-danger">Error: ${n}</div>\n        `)}})}init(){$("#nidaForm").on("submit",(t=>{t.preventDefault();const s=$("#nida_number").val();this.submitButton.attr("disabled",!0),$("#nida_response").html(this.spinner),s?this.HakikishaNIDA(s):(this.submitButton.attr("disabled",!1),$("#nida_response").html('\n            <div class="alert alert-warning">Please enter a NIDA number.</div>\n        '))}))}}).init()}));